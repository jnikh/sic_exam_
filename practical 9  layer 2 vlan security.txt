practical 9 


REQUIREMENT : 3 PC , 3 SWITCH , 3 ROUTER 



configure R1 and R2 , R3

en 

conf t


enable secret enpa55
line consol 0 
password conpa55
login
exit
ip domain-name ccnasecurity.com
username admin secret adminpa55
line vty 0 4
login local 
exit 
crypto key generate rsa
1024



Now configure the R1 

router ospf 1
network 192.168.1.0 0.0.0.255 area 0

network 192.168.1.0 0.0.0.3 area 0



Now configure the R2

router ospf 1
network 192.168.2.0 0.0.0.255 area 0 

network 10.2.2.0 0.0.0.3 area 0 
network 10.1.1.0 0.0.0.3 area 0 

ex        (..... ospf ka network chlau) 



Now configure the R3


router ospf 1 
network 10.2.2.0 0.0.0.3 area 0

network 192.168.3.0 0.0.0.255 area 0

ex        (... ospf configure now complete fo all router )




Now check for ping go to PC A > Desktop > Command prompt 

ping 192.168.3.3    (.... firts criteria complete to check connectivity PC-A to PC-C ) 



Now go to R1 > CLI


ex 
license         (....press tab till you get securityk9 )


show version

license         (....press tab till you get securityk9 )

y

ex

reload 

y


type your password 

en

again password 

conf t


configure R1 (now copy paste the command ) 

access-list 110 permit ip 192.168.1.0 0.0.0.255 192.168.3.0 0.0.0.255
crypto isakmp policy 10 
encryption aes 256
authentication pre-share 
group 5 
exit
crypto isakmp key vpnpa55 address 10.2.2.2
crypto ipsec transform-set VPN-SET esp-aes esp-sha-hmac 
crypto map VPN-MAP 10 ipsec-isakmp 
description VPN connection to R3
set peer 10.2.2.2
set transform-set VPN-SET
match address 110
exit
interface se0/0/0
crypto map VPN-MAP




NOw configure for R3 

ex

license         (....press tab till you get securityk9 )

y

ex

reload

y

type your password 

en

again password 

conf t


ex          



Now copy paste the commands for R3

access-list 110 permit ip 192.168.3.0 0.0.0.255 192.168.1.0 0.0.0.255
crypto isakmp policy 10 
encryption aes 256 
authentication pre-share
group 5
exit 
crypto isakmp key vpnpa55 address 10.1.1.2
crypto ipsec transform-set VPN-SET esp-aes esp-sha-hmac
crypto map VPN-MAP 10 ipsec-isakmp
description VPN connection to R1
set peer 10.1.1.2
set transform-set VPN-SET
match address 110
exit
interface s0/0/1
crypto map VPN-MAP



now for verification 

check it for R1

ex

ex

show crypto ipsec sa 


Check it for R3

ex

ex

show crypto ipsec sa 



now Ping part > go yo PC-C > desktop > command prompt 


ping 192.168.1.3


Now ping all pc 


PC - A

ping 192.168.2.3

ping 192.168.3.3